<%# VCF-File Show %>

<% @new_jqui = true %>

<% content_for :head do %>
<!-- script type="text/javascript" src="/public/ng/angular.min.js" ></script -->

<!--
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.13/angular.min.js" ></script>
<script type="text/javascript" src="http://lorenzofox3.github.io/smart-table-website/bower_components/angular-bootstrap/ui-bootstrap.min.js" ></script>
<script type="text/javascript" src="http://lorenzofox3.github.io/smart-table-website/bower_components/angular-bootstrap/ui-bootstrap-tpls.min.js" ></script>
<script type="text/javascript" src="http://lorenzofox3.github.io/smart-table-website/bower_components/angular-smart-table/dist/smart-table.debug.js" ></script>
<script type="text/javascript" src="http://lorenzofox3.github.io/smart-table-website/assets/js/app.js" ></script>
-->


    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular-touch.js"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/angularjs/1.2.26/angular-animate.js"></script>
    <script src="http://ui-grid.info/docs/grunt-scripts/csv.js"></script>
    <script src="http://ui-grid.info/docs/grunt-scripts/pdfmake.js"></script>
    <script src="http://ui-grid.info/docs/grunt-scripts/vfs_fonts.js"></script>
<!--
    <script src="/release/ui-grid-unstable.js"></script>
    <script src="/release/ui-grid-unstable.css"></script>
-->

<script type="text/javascript" src="/public/ng/ui-grid-stable.min.js" ></script>
<link rel="stylesheet" href="/public/ng/ui-grid-stable.min.css" type="text/css" />


<script type="text/javascript">
var app = angular.module('app', ['ngAnimate', 'ngTouch', 'ui.grid']);
 
app.controller('MainCtrl', ['$scope', '$http', 'uiGridConstants', function ($scope, $http, uiGridConstants) {
  $scope.gridOptions1 = {
    enableSorting: true,
    columnDefs: [
      { field: 'name' },
      { field: 'gender' },
      { field: 'company', enableSorting: false,         
                 cellTemplate:'<div>' +
                   '<a href="http://stackoverflow.com">{{row.entity[col.field]}}</a>' +
                   '</div>' }
    ],
    onRegisterApi: function( gridApi ) {
      $scope.grid1Api = gridApi;
    }
  };
  
  $scope.toggleGender = function() {
    if( $scope.gridOptions1.data[64].gender === 'male' ) {
      $scope.gridOptions1.data[64].gender = 'female';
    } else {
      $scope.gridOptions1.data[64].gender = 'male';
    };
    $scope.grid1Api.core.notifyDataChange( uiGridConstants.dataChange.EDIT );
  };
 
   $scope.gridOptions2 = {
    enableSorting: true,
    onRegisterApi: function( gridApi ) {
      $scope.grid2Api = gridApi;
    },
    columnDefs: [
      {
        field: 'name',
        sort: {
          direction: uiGridConstants.DESC,
          priority: 1
        }
      },
      {
        field: 'gender',
        sort: {
          direction: uiGridConstants.ASC,
          priority: 0,
        },
        suppressRemoveSort: true,
        sortingAlgorithm: function(a, b) {
          var nulls = $scope.grid2Api.core.sortHandleNulls(a, b);
          if( nulls !== null ) {
            return nulls;
          } else {
            if( a === b ) {
              return 0;
            }
            if( a === 'male' ) {
              return 1;
            }
            if( b === 'male' ) {
              return -1;
            }
            if( a == 'female' ) {
              return 1;
            }
            if( b === 'female' ) {
              return -1;
            }
            return 0;
          }
        }
      },
      { field: 'company', enableSorting: false  }
    ]
  };
 
// $http.get('http://ui-grid.info/data/100.json')
//    .success(function(data) {
//      $scope.gridOptions1.data = data;
//      $scope.gridOptions2.data = data;
//    });
idata=[
    {
        "name": "Ethel Price",
        "gender": "female",
        "company": "Enersol"
    },
    {
        "name": "Claudine Neal",
        "gender": "female",
        "company": "Sealoud"
    },
    {
        "name": "Beryl Rice",
        "gender": "female",
        "company": "Velity"
    },
    {
        "name": "Wilder Gonzales",
        "gender": "male",
        "company": "Geekko"
    },
    {
        "name": "Georgina Schultz",
        "gender": "female",
        "company": "Suretech"
    },
    {
        "name": "Carroll Buchanan",
        "gender": "male",
        "company": "Ecosys"
    },
    {
        "name": "Valarie Atkinson",
        "gender": "female",
        "company": "Hopeli"
    },
    {
        "name": "Schroeder Mathews",
        "gender": "male",
        "company": "Polarium"
    },
    {
        "name": "Lynda Mendoza",
        "gender": "female",
        "company": "Dogspa"
    },
    {
        "name": "Sarah Massey",
        "gender": "female",
        "company": "Bisba"
    },
    {
        "name": "Robles Boyle",
        "gender": "male",
        "company": "Comtract"
    },
    {
        "name": "Evans Hickman",
        "gender": "male",
        "company": "Parleynet"
    },
    {
        "name": "Dawson Barber",
        "gender": "male",
        "company": "Dymi"
    },
    {
        "name": "Bruce Strong",
        "gender": "male",
        "company": "Xyqag"
    },
    {
        "name": "Nellie Whitfield",
        "gender": "female",
        "company": "Exospace"
    },
    {
        "name": "Jackson Macias",
        "gender": "male",
        "company": "Aquamate"
    },
    {
        "name": "Pena Pena",
        "gender": "male",
        "company": "Quarx"
    },
    {
        "name": "Lelia Gates",
        "gender": "female",
        "company": "Proxsoft"
    },
    {
        "name": "Letitia Vasquez",
        "gender": "female",
        "company": "Slumberia"
    },
    {
        "name": "Trevino Moreno",
        "gender": "male",
        "company": "Conjurica"
    },
    {
        "name": "Barr Page",
        "gender": "male",
        "company": "Apex"
    },
    {
        "name": "Kirkland Merrill",
        "gender": "male",
        "company": "Utara"
    },
    {
        "name": "Blanche Conley",
        "gender": "female",
        "company": "Imkan"
    },
    {
        "name": "Atkins Dunlap",
        "gender": "male",
        "company": "Comveyor"
    },
    {
        "name": "Everett Foreman",
        "gender": "male",
        "company": "Maineland"
    },
    {
        "name": "Gould Randolph",
        "gender": "male",
        "company": "Intergeek"
    },
    {
        "name": "Kelli Leon",
        "gender": "female",
        "company": "Verbus"
    },
    {
        "name": "Freda Mason",
        "gender": "female",
        "company": "Accidency"
    },
    {
        "name": "Tucker Maxwell",
        "gender": "male",
        "company": "Lumbrex"
    },
    {
        "name": "Yvonne Parsons",
        "gender": "female",
        "company": "Zolar"
    },
    {
        "name": "Woods Key",
        "gender": "male",
        "company": "Bedder"
    },
    {
        "name": "Stephens Reilly",
        "gender": "male",
        "company": "Acusage"
    },
    {
        "name": "Mcfarland Sparks",
        "gender": "male",
        "company": "Comvey"
    },
    {
        "name": "Jocelyn Sawyer",
        "gender": "female",
        "company": "Fortean"
    },
    {
        "name": "Renee Barr",
        "gender": "female",
        "company": "Kiggle"
    },
    {
        "name": "Gaines Beck",
        "gender": "male",
        "company": "Sequitur"
    },
    {
        "name": "Luisa Farrell",
        "gender": "female",
        "company": "Cinesanct"
    },
    {
        "name": "Robyn Strickland",
        "gender": "female",
        "company": "Obones"
    },
    {
        "name": "Roseann Jarvis",
        "gender": "female",
        "company": "Aquazure"
    },
    {
        "name": "Johnston Park",
        "gender": "male",
        "company": "Netur"
    },
    {
        "name": "Wong Craft",
        "gender": "male",
        "company": "Opticall"
    },
    {
        "name": "Merritt Cole",
        "gender": "male",
        "company": "Techtrix"
    },
    {
        "name": "Dale Byrd",
        "gender": "female",
        "company": "Kneedles"
    },
    {
        "name": "Sara Delgado",
        "gender": "female",
        "company": "Netagy"
    },
    {
        "name": "Alisha Myers",
        "gender": "female",
        "company": "Intradisk"
    },
    {
        "name": "Felecia Smith",
        "gender": "female",
        "company": "Futurity"
    },
    {
        "name": "Neal Harvey",
        "gender": "male",
        "company": "Pyramax"
    },
    {
        "name": "Nola Miles",
        "gender": "female",
        "company": "Sonique"
    },
    {
        "name": "Herring Pierce",
        "gender": "male",
        "company": "Geeketron"
    },
    {
        "name": "Shelley Rodriquez",
        "gender": "female",
        "company": "Bostonic"
    },
    {
        "name": "Cora Chase",
        "gender": "female",
        "company": "Isonus"
    },
    {
        "name": "Mckay Santos",
        "gender": "male",
        "company": "Amtas"
    },
    {
        "name": "Hilda Crane",
        "gender": "female",
        "company": "Jumpstack"
    },
    {
        "name": "Jeanne Lindsay",
        "gender": "female",
        "company": "Genesynk"
    },
    {
        "name": "Frye Sharpe",
        "gender": "male",
        "company": "Eplode"
    },
    {
        "name": "Velma Fry",
        "gender": "female",
        "company": "Ronelon"
    },
    {
        "name": "Reyna Espinoza",
        "gender": "female",
        "company": "Prismatic"
    },
    {
        "name": "Spencer Sloan",
        "gender": "male",
        "company": "Comverges"
    },
    {
        "name": "Graham Marsh",
        "gender": "male",
        "company": "Medifax"
    },
    {
        "name": "Hale Boone",
        "gender": "male",
        "company": "Digial"
    },
    {
        "name": "Wiley Hubbard",
        "gender": "male",
        "company": "Zensus"
    },
    {
        "name": "Blackburn Drake",
        "gender": "male",
        "company": "Frenex"
    },
    {
        "name": "Franco Hunter",
        "gender": "male",
        "company": "Rockabye"
    },
    {
        "name": "Barnett Case",
        "gender": "male",
        "company": "Norali"
    },
    {
        "name": "Alexander Foley",
        "gender": "male",
        "company": "<b>Geekosis</b>"
    },
    {
        "name": "Lynette Stein",
        "gender": "female",
        "company": "Macronaut"
    },
    {
        "name": "Anthony Joyner",
        "gender": "male",
        "company": "Senmei"
    },
    {
        "name": "Garrett Brennan",
        "gender": "male",
        "company": "Bluegrain"
    },
    {
        "name": "Betsy Horton",
        "gender": "female",
        "company": "Zilla"
    },
    {
        "name": "Patton Small",
        "gender": "male",
        "company": "Genmex"
    },
    {
        "name": "Lakisha Huber",
        "gender": "female",
        "company": "Insource"
    },
    {
        "name": "Lindsay Avery",
        "gender": "female",
        "company": "Unq"
    },
    {
        "name": "Ayers Hood",
        "gender": "male",
        "company": "Accuprint"
    },
    {
        "name": "Torres Durham",
        "gender": "male",
        "company": "Uplinx"
    },
    {
        "name": "Vincent Hernandez",
        "gender": "male",
        "company": "Talendula"
    },
    {
        "name": "Baird Ryan",
        "gender": "male",
        "company": "Aquasseur"
    },
    {
        "name": "Georgia Mercer",
        "gender": "female",
        "company": "Skyplex"
    },
    {
        "name": "Francesca Elliott",
        "gender": "female",
        "company": "Nspire"
    },
    {
        "name": "Lyons Peters",
        "gender": "male",
        "company": "Quinex"
    },
    {
        "name": "Kristi Brewer",
        "gender": "female",
        "company": "Oronoko"
    },
    {
        "name": "Tonya Bray",
        "gender": "female",
        "company": "Insuron"
    },
    {
        "name": "Valenzuela Huff",
        "gender": "male",
        "company": "Applideck"
    },
    {
        "name": "Tiffany Anderson",
        "gender": "female",
        "company": "Zanymax"
    },
    {
        "name": "Jerri King",
        "gender": "female",
        "company": "Eventex"
    },
    {
        "name": "Rocha Meadows",
        "gender": "male",
        "company": "Goko"
    },
    {
        "name": "Marcy Green",
        "gender": "female",
        "company": "Pharmex"
    },
    {
        "name": "Kirk Cross",
        "gender": "male",
        "company": "Portico"
    },
    {
        "name": "Hattie Mullen",
        "gender": "female",
        "company": "Zilencio"
    },
    {
        "name": "Deann Bridges",
        "gender": "female",
        "company": "Equitox"
    },
    {
        "name": "Chaney Roach",
        "gender": "male",
        "company": "Qualitern"
    },
    {
        "name": "Consuelo Dickson",
        "gender": "female",
        "company": "Poshome"
    },
    {
        "name": "Billie Rowe",
        "gender": "female",
        "company": "Cemention"
    },
    {
        "name": "Bean Donovan",
        "gender": "male",
        "company": "Mantro"
    },
    {
        "name": "Lancaster Patel",
        "gender": "male",
        "company": "Krog"
    },
    {
        "name": "Rosa Dyer",
        "gender": "female",
        "company": "Netility"
    },
    {
        "name": "Christine Compton",
        "gender": "female",
        "company": "Bleeko"
    },
    {
        "name": "Milagros Finch",
        "gender": "female",
        "company": "Handshake"
    },
    {
        "name": "Ericka Alvarado",
        "gender": "female",
        "company": "Lyrichord"
    },
    {
        "name": "Sylvia Sosa",
        "gender": "female",
        "company": "Circum"
    },
    {
        "name": "Humphrey Curtis",
        "gender": "male",
        "company": "Corepan"
    }
];
      $scope.gridOptions1.data = idata;
      $scope.gridOptions2.data = idata;

}]);
// $(document).ready(function() {
// });
</script>    

<style type="text/css">
.grid {
  width: 500px;
  height: 200px;
}
</style>
<% end %>

<%= heading_block 'View VCF' do %>

<div ng-app="app">

    <div ng-controller="MainCtrl">
      Click on a column header to sort by that column. (The third column has sorting disabled.)
      To demonstrate the live sorting we provide a button that toggles the gender of Alexander Foley.
      Sort by gender (ASC - so click twice) then name (using shift click), so that Alexander is at the top of the grid,
      then click the toggleGender button.
    
      <br>
      <br>
      <button id='toggleGender' ng-click='toggleGender()'>Toggle Gender</button>
      <div id="grid1" ui-grid="gridOptions1" class="grid"></div>
    
      <br>
      You can set an initial sort state for the grid by defining the `sort` property on your column definitions. 
      The `direction` sub-property says which way to sort, and the `priority` says what order to sort the columns 
      in (lower priority gets sorted first).
      <br>
      <br>
    
      <div id="grid2" ui-grid="gridOptions2" class="grid"></div>
    </div>


</div>

<% end %>
