<h1>PEDIA Submission</h1>
<p>PEDIA Service is a website which provides user with the service of performing PEDIA scoring approach.
By submitting the JSON file of your case which your receive from Face2Gene and a
VCF from exome sequencing experiment, we will calculate the Phenomizer and Boqa
score based on the HPO term and annotate the CADD score of the variants in VCF.
After obtain all the scores, we then run the PEDIA classifier to calculate the PEDIA
score for each gene. For more detail about the software, please refer our project
GitHub repository (<a href="https://github.com/PEDIA-Charite/classifier">PEDIA</a>)
</p>

<p>This service is only for the user who already has a JSON file from Face2Gene
and an annotated VCF file. By submitting json file and VCF file, user will get
the prioritization result from PEDIA approach. After submit your case, you
will receive a confirmation email from us. Once your result is ready, we
will send an email to inform you the result.</p>

<p>To submit your case, please press the button below to start your submission.
If you have any question, please contact our service account
<a href="mailto:contact@pedia-study.org">contact@pedia-study.org</a>.</p>

<%= form_tag({:action => 'create', :pedia_service => @pedia_service}, :multipart => true) do %>
  <div class="field">
    <%= label_tag "json_file", "JSON file (*.json)" %>
    <%= file_field_tag "json_file",  accept: '.json', :required => true%>
  </div>
  <div class="field">
    <%= label_tag "vcf", "VCF (*.vcf.gz)" %>
    <%= file_field_tag "vcf",  accept: '.vcf.gz', :required => true%>
  </div>
  <div class="field">
    <%= label_tag :name %>
    <%= text_field_tag :username, nil, :required => true%>
  </div>
  <div class="field">
    <%= label_tag :email %>
    <%= text_field_tag :email, nil, :required => true%>
  </div>
  <div class="actions">
    <%= submit_tag "Upload" %>
  </div>
<% end %>
<br>
<%= link_to 'Back', pedia_services_path %>

<br><br>
<h2>Example</h2>
<p>Here we provide a sample JSON file for your reference. This is the format of file which you receive from Face2Gene.</p>
<pre>
<code>
  {
    "case_id": your case ID,
    "features": [
      "HP:0002000",
      "HP:0002345",
      "HP:0001234"
    ],
    "detected_syndromes": [
      {
        "feature_score": 0.85,
        "omim_id": [
        614753,
        117550,
        617169
        ],
        "combined_score": 0.52,
        "syndrome_name": "Sotos Syndrome",
        "gestalt_score": 0.365563
      },
      {
        "feature_score": 1,
        "omim_id": 235730,
        "combined_score": 0.52,
        "syndrome_name": "Mowat-Wilson Syndrome; MOWS",
        "gestalt_score": 0.12918
      }
    ],
    "submitter": {
      "user_email": "your@email",
      "user_name": "your name",
      "user_team": "your team"
    }
  }
</code>
</pre>
